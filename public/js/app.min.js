"use strict";let scorekeeper=0,count=0,sameItem=[],prevSettings=12,elements="",totalLives=3,score=document.querySelector(".score"),lives=[],life_container=document.querySelector(".lives"),accuracy=document.querySelector(".accuracy"),numMoves=0,totalCorrect=0,tm=0,time=0,correct="",countdowntxt=document.querySelector(".countdown__text");const heartImgs=["imgs/sprite_h.png","imgs/sprite_h2.png","imgs/sprite_h3.png"],imgArr=["png/036-icecreamstick.png","png/001-gift.png","png/002-pizza.png","png/043-speakers.png","png/015-chat.png","png/004-confetti.png","png/007-piÃ±ata.png","png/041-lollipop.png","png/049-burger.png","png/038-crown.png","png/045-barbecue.png","png/030-doughnut.png","png/032-microphone.png","png/009-synthesizer.png","png/031-taco.png","png/040-bell.png","png/022-birthday cake.png","png/016-lemonade.png","png/013-clock.png","png/027-photocamera.png","pngCraft/049-knitting.png","pngCraft/035-origami.png","pngCraft/031-pliers.png","pngCraft/013-handsaw.png","pngCraft/038-hatchet.png","pngCraft/032-toolkit.png","pngCraft/003-liquidglue.png"];let won=new Howl({src:["sounds/congrats.mp3"],volume:1}),sound=new Howl({src:["sounds/success2.mp3"],volume:.2}),click=new Howl({src:["sounds/click.mp3"],volume:1}),mode=new Howl({src:["sounds/mode.mp3"],volume:1}),swoosh=new Howl({src:["sounds/bamboo_swoosh.mp3","cable_swoosh.mp3","thick_swoosh.mp3"],volume:1}),fail=new Howl({src:["sounds/fail.mp3"],volume:1}),loseheart=new Howl({src:["sounds/lose_heart.mp3"],volume:.7}),playstate=new Howl({src:["sounds/idea.mp3"],volume:1,loop:!0}),vol=document.querySelector(".tg");function countDown(){n--,0==n&&clearInterval(tm),console.log(n)}function removelife(){if(--totalLives>=0){let e=document.querySelector(".last_notice");e.innerHTML="-1 Life",e.classList.add("fadeUp");let t=lives.pop();setTimeout(function(){t.src=heartImgs[1]},1e3),setTimeout(function(){t.src=heartImgs[2],loseheart.play(),e.classList.remove("fadeUp"),0===totalLives&&setTimeout(()=>{let e=document.querySelector(".last_notice");e.innerHTML="Last Life",e.classList.add("fadeUpShow")},500)},2e3)}}function populateBoard(e){let t=document.querySelector(".game-board");for(let n=0;n<e;n++){let e=document.createElement("button");e.classList.add("card");let n=document.createElement("div");n.classList.add("card--front");let o=document.createElement("div");o.classList.add("card--back");let s=document.createElement("IMG");s.src="imgs/bg2.jpg",s.classList.add("item-front");let a=document.createElement("IMG");a.classList.add("item-back"),n.appendChild(s),o.appendChild(a),e.appendChild(n),e.appendChild(o),t.appendChild(e)}}function populateImages(e,t){const n=document.querySelectorAll(".item-back");let o=null;for(let s=0;s<t;s++)for(let t=0;t<2;t++)n[o=e[s][1]].src=`imgs/${e[s][0]}`}const compare=e=>{return e[0].lastChild.src===e[1].lastChild.src};function updateScore(e,t){if(e===t/2){const e=playstate.volume();setTimeout(()=>{playstate.volume(e)},1500),playstate.volume(0),document.querySelector(".game_notice--won").innerHTML="YOU WON!",won.play()}score.innerHTML="Score:"+e}function updateAccuracy(){let e="",t="",n="";!0===correct&&totalCorrect++,t=100*(e=totalCorrect/numMoves),n=Math.floor(t),accuracy.innerHTML="Accuracy:"+n+"%"}function reset(e,t){setTimeout(()=>{if(totalLives<0){t.forEach(e=>{e.disabled=!0});const e=playstate.volume();setTimeout(()=>{playstate.volume(e)},3e3),playstate.volume(0),fail.play(),document.querySelector(".game_notice--lost").innerHTML="YOU LOST!"}else e.forEach(e=>{1!=e.isPair&&e.previousSibling.classList.contains("card--front_active")&&e.previousSibling.classList.remove("card--front_active"),1!=e.isPair&&e.classList.contains("card--back_active")&&(e.classList.remove("card--back_active"),swoosh.play())}),t.forEach(e=>{e.lastChild.classList.contains("card--back_active")||(e.disabled=!1)}),sameItem=[],count=0},1500)}function resetAll(e,t){document.querySelector(".game-board").innerHTML=" ",life_container.innerHTML=" ",totalLives=t,lives=[],updateScore(scorekeeper=0,e),count=0,sameItem=[],init(e),mode.play();let n=document.querySelector(".last_notice");n.innerHTML="",n.classList.remove("fadeUpShow");let o=document.querySelector(".game_notice--won"),s=document.querySelector(".game_notice--lost");o.innerHTML="",s.innerHTML="",numMoves=0,totalCorrect=0,time=0,tm=0,accuracy.innerHTML="Accuracy:"+totalCorrect+"%"}function init(e=12){for(let e=0;e<totalLives;e++){let t=document.createElement("IMG");t.classList.add("lifelines"),life_container.appendChild(t),t.src=heartImgs[0],lives[e]=t}elements=e;let t=" ",n=[],o="",s=[],a=[];for(;a.length<elements;){let e=Math.floor(Math.random()*elements);-1===a.indexOf(e)&&a.push(e)}let l=0;for(let e=0;e<elements/2;e++){do{o=Math.floor(Math.random()*imgArr.length),t=n.includes(o)}while(t);n.push(o);for(let e=0;e<2;e++)s.push([imgArr[o],a[l]]),l++}populateBoard(elements),populateImages(s,elements);const c=document.querySelectorAll(".card"),r=document.querySelectorAll(".card--front"),i=document.querySelectorAll(".card--back");12===elements&&turnCards(3500,c,r,i),18===elements&&turnCards(5500,c,r,i),elements>=24&&turnCards(7500,c,r,i);for(let e=0;e<c.length;e++)c[e].addEventListener("click",t=>{click.play(),c[e].disabled=!0,r[e].classList.add("card--front_active"),i[e].classList.add("card--back_active"),2==++count&&c.forEach(e=>e.disabled=!0);let n="";n=i[e],sameItem.push(n),2==sameItem.length&&(++numMoves,compare(sameItem)?(sameItem.forEach(e=>{e.parentNode.classList.add("scale"),e.isPair=!0,setTimeout(()=>{e.parentNode.classList.remove("scale")},1e3)}),setTimeout(()=>{sound.play()},200),correct=!0,updateScore(++scorekeeper,elements),reset(sameItem,c)):(sameItem.forEach(e=>{1!=e.isPair&&(e.isPair=!1)}),reset(sameItem,c),removelife(),correct=!1),updateAccuracy())})}function turnCards(e,t,n,o){setTimeout(()=>{n.forEach(e=>{e.classList.add("card--front_active")}),o.forEach(e=>{e.classList.add("card--back_active")}),setTimeout(()=>{n.forEach(e=>{e.classList.remove("card--front_active")}),o.forEach(e=>{e.classList.remove("card--back_active")}),setTimeout(()=>{t.forEach(e=>{e.disabled=!1,e.classList.remove("disabled"),document.querySelectorAll(".btn").forEach(e=>{e.classList.remove("disabled"),e.disabled=!1}),setTimeout(()=>{countdowntxt.innerHTML="",countdowntxt.classList.remove("fadeOut"),countdowntxt.style.removeProperty("color")},1e3)},500),countdowntxt.classList.add("fadeOut")},500),swoosh.play(),countdowntxt.innerHTML="GO !",countdowntxt.style.color="#64FFDA"},e),t.forEach(e=>{e.disabled=!0,e.classList.add("disabled")});let s=e/1e3;time=Math.floor(s),tm=setInterval(countDown,1e3)},500)}function easyMode(e){return mode.play(),12,12}function hardMode(e){return mode.play(),18,18}function expertMode(e){return mode.play(),24,24}function disableSpam(){document.querySelectorAll(".btn").forEach(e=>{e.disabled="true",e.classList.add("disabled")})}function countDown(){0==--time&&clearInterval(tm),countdowntxt.innerHTML=time}let lifelines=3,easybtn=document.querySelector(".btn--easy");easybtn.addEventListener("click",()=>(prevSettings=easyMode(),lifelines=3,disableSpam(),resetAll(prevSettings,lifelines)));let hardbtn=document.querySelector(".btn--hard");hardbtn.addEventListener("click",()=>(prevSettings=hardMode(),lifelines=5,disableSpam(),resetAll(prevSettings,lifelines)));let expertbtn=document.querySelector(".btn--expert");expertbtn.addEventListener("click",()=>(prevSettings=expertMode(),lifelines=7,disableSpam(),resetAll(prevSettings,lifelines)));let resetbtn=document.querySelector(".btn--reset");resetbtn.addEventListener("click",()=>(disableSpam(),resetAll(prevSettings,lifelines))),vol.addEventListener("click",()=>{vol.classList.contains("fa-volume-up")?(vol.classList.remove("fa-volume-up"),vol.classList.add("fa-volume-mute"),playstate.pause()):(vol.classList.add("fa-volume-up"),vol.classList.remove("fa-volume-mute"),playstate.play())}),init(12);